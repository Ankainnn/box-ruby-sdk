<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: Box::Account
  
    &mdash; Documentation by YARD 0.7.2
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '..';
  if (relpath != '') relpath += '/';
</script>

  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (A)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../Box.html" title="Box (module)">Box</a></span></span>
     &raquo; 
    <span class="title">Account</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a id="class_list_link" href="#">Class List</a>
  
    <a id="method_list_link" href="#">Method List</a>
  
    <a id="file_list_link" href="#">File List</a>
  
</div>
      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: Box::Account
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Box::Account</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/box/account.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>
Represents an account on Box. In order to use the Box api, the user must
first grant the application permission to use their account. This is done
in the <span class='object_link'><a href="#authorize-instance_method" title="Box::Account#authorize (method)">#authorize</a></span> function. Once an account has been authorized, it can
access all of the details and information stored on that account.
</p>


  </div>
</div>
<div class="tags">
  
</div>

  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#api-instance_method" title="#api (instance method)">- (Object) <strong>api</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute api.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#auth_token-instance_method" title="#auth_token (instance method)">- (Object) <strong>auth_token</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute auth_token.
</p>
</div></span>
  
</li>

    
      <li class="public deprecated">
  <span class="summary_signature">
    
      <a href="#ticket-instance_method" title="#ticket (instance method)">- (String) <strong>ticket</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  <span class="deprecated note title">Deprecated</span>
  

  
    <span class="summary_desc"><strong>Deprecated.</strong> <div class='inline'><p>
This function should not be used externally, and will be made protected. Is
only used for caching.
</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#authorize-instance_method" title="#authorize (instance method)">- (Boolean) <strong>authorize</strong>(auth_token = self.auth_token) {|authorize_url| ... }</a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Authorize the account using the given auth token, or request permission
from the user to let this application use their account.
</p>
</div></span>
  
</li>

      
        <li class="public deprecated">
  <span class="summary_signature">
    
      <a href="#authorize_ticket-instance_method" title="#authorize_ticket (instance method)">- (String<sup>?</sup>) <strong>authorize_ticket</strong>(ticket = self.ticket) </a>
    

    
  </span>
  
  
  
  
  <span class="deprecated note title">Deprecated</span>
  

  
    <span class="summary_desc"><strong>Deprecated.</strong> <div class='inline'><p>
This function should not be used externally, and will be made protected.
Authorizing using a saved ticket is risky, and a new ticket should be
requested in all cases. Use <span class='object_link'><a href="#authorize-instance_method" title="Box::Account#authorize (method)">#authorize</a></span> instead.
</p>
</div></span>
  
</li>

      
        <li class="public deprecated">
  <span class="summary_signature">
    
      <a href="#authorize_token-instance_method" title="#authorize_token (instance method)">- (Object) <strong>authorize_token</strong>(auth_token = self.auth_token) </a>
    

    
  </span>
  
  
  
  
  <span class="deprecated note title">Deprecated</span>
  

  
    <span class="summary_desc"><strong>Deprecated.</strong> <div class='inline'><p>
This function should not be used externally, and will be made protected. Is
only used for caching.
</p>
</div></span>
  
</li>

      
        <li class="public deprecated">
  <span class="summary_signature">
    
      <a href="#authorize_url-instance_method" title="#authorize_url (instance method)">- (String) <strong>authorize_url</strong>(ticket = self.ticket) </a>
    

    
  </span>
  
  
  
  
  <span class="deprecated note title">Deprecated</span>
  

  
    <span class="summary_desc"><strong>Deprecated.</strong> <div class='inline'><p>
This function should not be used externally, and will be made protected.
The url will be passed to the block given in <span class='object_link'><a href="#authorize-instance_method" title="Box::Account#authorize (method)">#authorize</a></span> when it is
required.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#authorized%3F-instance_method" title="#authorized? (instance method)">- (Boolean) <strong>authorized?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Return if the account is authorized or not.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#info-instance_method" title="#info (instance method)">- (Hash<sup>?</sup>) <strong>info</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Return the account details.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (Account) <strong>initialize</strong>(api) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Creates an account object using the given Box api key.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#logout-instance_method" title="#logout (instance method)">- (Boolean) <strong>logout</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Log out of the account and invalidate the auth token.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#register-instance_method" title="#register (instance method)">- (Object) <strong>register</strong>(email, password) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Register a new account on the Box website with the given details.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#root-instance_method" title="#root (instance method)">- (Folder) <strong>root</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Get the root folder of the account.
</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Box::Account (class)">Account</a></span></tt>) <strong>initialize</strong>(api) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Creates an account object using the given Box api key. You can then
<span class='object_link'><a href="#register-instance_method" title="Box::Account#register (method)">#register</a></span> a new account or <span class='object_link'><a href="#authorize-instance_method" title="Box::Account#authorize (method)">#authorize</a></span> an existing account.
</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>api</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt><span class='object_link'><a href="Api.html" title="Box::Api (class)">Api</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the api key to use for the Box api.
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


18
19
20
21
22
23</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/box/account.rb', line 18</span>

<span class='kw'>def</span> <span class='id initialize'>initialize</span><span class='lparen'>(</span><span class='id api'>api</span><span class='rparen'>)</span>
  <span class='ivar'>@api</span> <span class='op'>=</span> <span class='kw'>case</span>
    <span class='kw'>when</span> <span class='id api'>api</span><span class='period'>.</span><span class='id class'>class</span> <span class='op'>==</span> <span class='const'>Box</span><span class='op'>::</span><span class='const'>Api</span><span class='semicolon'>;</span> <span class='id api'>api</span> <span class='comment'># use the api object as passed in
</span>    <span class='kw'>else</span><span class='semicolon'>;</span> <span class='const'>Box</span><span class='op'>::</span><span class='const'>Api</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id api'>api</span><span class='rparen'>)</span> <span class='comment'># allows user to pass in a string
</span>  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <span id="api-instance_method"></span>
      <div class="method_details first">
  <p class="signature first" id="api-instance_method">
  
    - (<tt>Object</tt>) <strong>api</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute api
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


11
12
13</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/box/account.rb', line 11</span>

<span class='kw'>def</span> <span class='id api'>api</span>
  <span class='ivar'>@api</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="auth_token-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="auth_token-instance_method">
  
    - (<tt>Object</tt>) <strong>auth_token</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute auth_token
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


11
12
13</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/box/account.rb', line 11</span>

<span class='kw'>def</span> <span class='id auth_token'>auth_token</span>
  <span class='ivar'>@auth_token</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="ticket-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="ticket-instance_method">
  
    - (<tt>String</tt>) <strong>ticket</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <div class="note deprecated"><strong>Deprecated.</strong> <div class='inline'><p>
This function should not be used externally, and will be made protected. Is
only used for caching.
</p>
</div></div>
<p>
Get the cached ticket or request a new one from the Box api.
</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the authorization ticket.
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


118
119
120</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/box/account.rb', line 118</span>

<span class='kw'>def</span> <span class='id ticket'>ticket</span>
  <span class='ivar'>@ticket</span> <span class='op'>||=</span> <span class='ivar'>@api</span><span class='period'>.</span><span class='id get_ticket'>get_ticket</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>ticket</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="authorize-instance_method">
  
    - (<tt>Boolean</tt>) <strong>authorize</strong>(auth_token = self.auth_token) {|authorize_url| ... }
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Authorize the account using the given auth token, or request permission
from the user to let this application use their account.
</p>
<p>
TODO: Default parameter is silly
</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'><p>
Authorize an account without an auth token. (normal)
</p>
</div></h4>
      <pre class="example code"><span class='id account'>account</span><span class='period'>.</span><span class='id authorize'>authorize</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id auth_url'>auth_url</span><span class='op'>|</span>
  <span class='id puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Please visit </span><span class='embexpr_beg'>#{</span> <span class='id auth_url'>auth_url</span> <span class='rbrace'>}</span><span class='tstring_content'> and enter your account infomation</span><span class='tstring_end'>&quot;</span></span>
  <span class='id puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hit enter once you have done this.</span><span class='tstring_end'>&quot;</span></span>
  <span class='id gets'>gets</span> <span class='comment'># wait for the enter key to be hit
</span><span class='kw'>end</span></pre>
    
      <h4><div class='inline'><p>
Authorize an accout using an existing auth token.
</p>
</div></h4>
      <pre class="example code"><span class='id auth_token'>auth_token</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>saved auth token</span><span class='tstring_end'>&quot;</span></span> <span class='comment'># load from file ideally
</span><span class='id account'>account</span><span class='period'>.</span><span class='id authorize'>authorize</span><span class='lparen'>(</span><span class='id auth_token'>auth_token</span><span class='rparen'>)</span></pre>
    
      <h4><div class='inline'><p>
Combine the two above for the best functionality
</p>
</div></h4>
      <pre class="example code"><span class='id auth_token'>auth_token</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>saved auth token</span><span class='tstring_end'>&quot;</span></span> <span class='comment'># load from file ideally (optional)
</span><span class='id account'>account</span><span class='period'>.</span><span class='id authorize'>authorize</span><span class='lparen'>(</span><span class='id auth_token'>auth_token</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id auth_url'>auth_url</span><span class='op'>|</span>
  <span class='comment'># auth token was invalid or nil, have the user visit auth_url
</span><span class='kw'>end</span></pre>
    
  </div>
<h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>auth_token</span>
      
      
        <span class='type'>(<tt>optional</tt>, <tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>self.auth_token</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>
used to speed up authorization by using an existing token instead of
requesting a new one. You should save the auth token to disk once
authorization is complete and re-use it on future attempts. However, once
the <span class='object_link'><a href="#logout-instance_method" title="Box::Account#logout (method)">#logout</a></span> method is called, the auth token is invalidated.
</p>
</div>
      
    </li>
  
</ul>
<h3>Yields:</h3>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>authorize_url</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
Block called when the user has not granted this application permission to
use their account. You must have the user navigate to the given url to
enter in their account details. Return control once you think this has been
done and the function will try to authorize one more time.
</p>
</div>
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
whether the user is authorized.
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/box/account.rb', line 91</span>

<span class='kw'>def</span> <span class='id authorize'>authorize</span><span class='lparen'>(</span><span class='id auth_token'>auth_token</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id auth_token'>auth_token</span><span class='rparen'>)</span>
  <span class='comment'># use a saved auth token if it is given
</span>  <span class='kw'>if</span> <span class='id auth_token'>auth_token</span>
    <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id authorize_token'>authorize_token</span><span class='lparen'>(</span><span class='id auth_token'>auth_token</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># the auth token either failed or was not provided
</span>  <span class='comment'># we must try to authorize a ticket, and call the block if that fails
</span>  <span class='kw'>if</span> <span class='kw'>not</span> <span class='id authorize_ticket'>authorize_ticket</span> <span class='kw'>and</span> <span class='id block_given?'>block_given?</span>
    <span class='comment'># the supplied block should instruct the user to visit this url
</span>    <span class='kw'>yield</span> <span class='id authorize_url'>authorize_url</span>

    <span class='comment'># try authorizing once more
</span>    <span class='id authorize_ticket'>authorize_ticket</span>
  <span class='kw'>end</span>

  <span class='comment'># return our authorized status
</span>  <span class='id authorized?'>authorized?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="authorize_ticket-instance_method">
  
    - (<tt>String</tt><sup>?</sup>) <strong>authorize_ticket</strong>(ticket = self.ticket) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <div class="note deprecated"><strong>Deprecated.</strong> <div class='inline'><p>
This function should not be used externally, and will be made protected.
Authorizing using a saved ticket is risky, and a new ticket should be
requested in all cases. Use <span class='object_link'><a href="#authorize-instance_method" title="Box::Account#authorize (method)">#authorize</a></span> instead.
</p>
</div></div>
<p>
Attempt to authorize this account using the given ticket. This will only
succeed if the user has granted this ticket permission, done by visiting
and logging into the <span class='object_link'><a href="#authorize_url-instance_method" title="Box::Account#authorize_url (method)">#authorize_url</a></span>.
</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>ticket</span>
      
      
        <span class='type'>(<tt>Optional</tt>, <tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>self.ticket</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>
the ticket used for authorization. If no ticket is provided, one will be
requested and cached.
</p>
</div>
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
The auth token if successful otherwise, nil.
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


151
152
153
154
155
156
157
158
159
160</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/box/account.rb', line 151</span>

<span class='kw'>def</span> <span class='id authorize_ticket'>authorize_ticket</span><span class='lparen'>(</span><span class='id ticket'>ticket</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id ticket'>ticket</span><span class='rparen'>)</span>
  <span class='kw'>begin</span>
    <span class='id response'>response</span> <span class='op'>=</span> <span class='ivar'>@api</span><span class='period'>.</span><span class='id get_auth_token'>get_auth_token</span><span class='lparen'>(</span><span class='id ticket'>ticket</span><span class='rparen'>)</span>

    <span class='id cache_info'>cache_info</span><span class='lparen'>(</span><span class='id response'>response</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>user</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='comment'># saves an extra API call
</span>    <span class='id authorize_token'>authorize_token</span><span class='lparen'>(</span><span class='id response'>response</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>auth_token</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>rescue</span> <span class='const'>Api</span><span class='op'>::</span><span class='const'>NotAuthorized</span>
    <span class='kw'>nil</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="authorize_token-instance_method">
  
    - (<tt>Object</tt>) <strong>authorize_token</strong>(auth_token = self.auth_token) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <div class="note deprecated"><strong>Deprecated.</strong> <div class='inline'><p>
This function should not be used externally, and will be made protected. Is
only used for caching.
</p>
</div></div>
<p>
Use and save the given auth token if it is valid.
</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>auth_token</span>
      
      
        <span class='type'>(<tt>Optional</tt>, <tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>self.auth_token</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>
the auth token to save. If no token if provided, the cached one will be
used.
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


170
171
172
173
174
175</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/box/account.rb', line 170</span>

<span class='kw'>def</span> <span class='id authorize_token'>authorize_token</span><span class='lparen'>(</span><span class='id auth_token'>auth_token</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id auth_token'>auth_token</span><span class='rparen'>)</span>
  <span class='comment'># TODO: I feel like the logic will fail often here.
</span>  <span class='comment'># TODO: Default paramater makes no sense.
</span>  <span class='ivar'>@api</span><span class='period'>.</span><span class='id set_auth_token'>set_auth_token</span><span class='lparen'>(</span><span class='id auth_token'>auth_token</span><span class='rparen'>)</span>
  <span class='ivar'>@auth_token</span> <span class='op'>=</span> <span class='id auth_token'>auth_token</span> <span class='kw'>if</span> <span class='id authorized?'>authorized?</span> <span class='comment'># cache token if successful
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="authorize_url-instance_method">
  
    - (<tt>String</tt>) <strong>authorize_url</strong>(ticket = self.ticket) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <div class="note deprecated"><strong>Deprecated.</strong> <div class='inline'><p>
This function should not be used externally, and will be made protected.
The url will be passed to the block given in <span class='object_link'><a href="#authorize-instance_method" title="Box::Account#authorize (method)">#authorize</a></span> when it is
required.
</p>
</div></div>
<p>
The url the user needs to visit in order to grant this application
permission to use their account. This requires a ticket, which is either
pulled from the cache or requested.
</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>ticket</span>
      
      
        <span class='type'>(<tt>Optional</tt>, <tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>self.ticket</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>
use the ticket for the url. If no ticket is provided, one will be requested
and cached.
</p>
</div>
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the url used for authorizing this account.
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


134
135
136</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/box/account.rb', line 134</span>

<span class='kw'>def</span> <span class='id authorize_url'>authorize_url</span><span class='lparen'>(</span><span class='id ticket'>ticket</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id ticket'>ticket</span><span class='rparen'>)</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span> <span class='id api'>api</span><span class='period'>.</span><span class='id base_url'>base_url</span> <span class='rbrace'>}</span><span class='tstring_content'>/auth/</span><span class='embexpr_beg'>#{</span> <span class='id ticket'>ticket</span> <span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="authorized?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>authorized?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong> 
    <div class='inline'><p>
This method will make a network request if the user does not have cached
account info.
</p>
</div>
  </div>

<p>
Return if the account is authorized or not.
</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
Whether the user is authorized.
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


184
185
186
187</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/box/account.rb', line 184</span>

<span class='kw'>def</span> <span class='id authorized?'>authorized?</span>
  <span class='comment'># TODO: Don't make a network request.
</span>  <span class='id info'>info</span> <span class='op'>!=</span> <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="info-instance_method">
  
    - (<tt>Hash</tt><sup>?</sup>) <strong>info</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Return the account details. A cached copy will be used if avaliable, and
requested if it is not.
</p>
<p>
TODO: Add url to Box api documentation, and provide the current fields.
</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash</tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
A hash containing all of the user&#8217;s account details, or nil if they
are not authorized. Please see the Box api documentation for information
about each field.
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


197
198
199
200
201
202
203
204
205
206</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/box/account.rb', line 197</span>

<span class='kw'>def</span> <span class='id info'>info</span>
  <span class='kw'>return</span> <span class='ivar'>@info</span> <span class='kw'>if</span> <span class='ivar'>@info</span>

  <span class='kw'>begin</span>
    <span class='id info'>info</span> <span class='op'>=</span> <span class='ivar'>@api</span><span class='period'>.</span><span class='id get_account_info'>get_account_info</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>user</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
    <span class='id cache_info'>cache_info</span><span class='lparen'>(</span><span class='id info'>info</span><span class='rparen'>)</span>
  <span class='kw'>rescue</span> <span class='const'>Api</span><span class='op'>::</span><span class='const'>NotAuthorized</span><span class='comma'>,</span> <span class='const'>Api</span><span class='op'>::</span><span class='const'>InvalidInput</span>
    <span class='kw'>nil</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="logout-instance_method">
  
    - (<tt>Boolean</tt>) <strong>logout</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong> 
    <div class='inline'><p>
The user will have to re-authorize if they wish to use this application,
and the auth token will no longer work.
</p>
</div>
  </div>

<p>
Log out of the account and invalidate the auth token.
</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
Whether logout was successful.
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


47
48
49
50
51
52
53
54
55
56</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/box/account.rb', line 47</span>

<span class='kw'>def</span> <span class='id logout'>logout</span>
  <span class='kw'>begin</span>
    <span class='ivar'>@api</span><span class='period'>.</span><span class='id logout'>logout</span>
    <span class='id authorize_token'>authorize_token</span><span class='lparen'>(</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>rescue</span> <span class='const'>Api</span><span class='op'>::</span><span class='const'>NotAuthorized</span>
    <span class='comment'># already logged out, or never logged in
</span>  <span class='kw'>end</span>

  <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="register-instance_method">
  
    - (<tt>Object</tt>) <strong>register</strong>(email, password) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Register a new account on the Box website with the given details.
</p>
<p>
TODO: Make register! for the thrown exceptions
</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>email</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the email address to create the account with
</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>password</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the password to create the account with
</p>
</div>
      
    </li>
  
</ul>
<h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>EmailInvalid</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the email address was invalid
</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt>EmailTaken</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the email address was taken
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


34
35
36
37
38
39</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/box/account.rb', line 34</span>

<span class='kw'>def</span> <span class='id register'>register</span><span class='lparen'>(</span><span class='id email'>email</span><span class='comma'>,</span> <span class='id password'>password</span><span class='rparen'>)</span>
  <span class='id response'>response</span> <span class='op'>=</span> <span class='ivar'>@api</span><span class='period'>.</span><span class='id register_new_user'>register_new_user</span><span class='lparen'>(</span><span class='id email'>email</span><span class='comma'>,</span> <span class='id password'>password</span><span class='rparen'>)</span>

  <span class='id cache_info'>cache_info</span><span class='lparen'>(</span><span class='id response'>response</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>user</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='comment'># cache account_info, saves an extra API call
</span>  <span class='id authorize_token'>authorize_token</span><span class='lparen'>(</span><span class='id response'>response</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>token</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="root-instance_method">
  
    - (<tt><span class='object_link'><a href="Folder.html" title="Box::Folder (class)">Folder</a></span></tt>) <strong>root</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong> 
    <div class='inline'><p>
This folder is lazy loaded, and a network request will be made when the
data is requested.
</p>
</div>
  </div>

<p>
Get the root folder of the account. You can use this <span class='object_link'><a href="Folder.html" title="Box::Folder (class)">Folder</a></span> object to
access all sub items within the account.
</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Folder.html" title="Box::Folder (class)">Folder</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
A folder object representing the root folder.
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


216
217
218
219</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/box/account.rb', line 216</span>

<span class='kw'>def</span> <span class='id root'>root</span>
  <span class='kw'>return</span> <span class='ivar'>@root</span> <span class='kw'>if</span> <span class='ivar'>@root</span>
  <span class='ivar'>@root</span> <span class='op'>=</span> <span class='const'>Box</span><span class='op'>::</span><span class='const'>Folder</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='ivar'>@api</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='symbol'>:id</span> <span class='op'>=&gt;</span> <span class='int'>0</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Mon Aug  8 10:24:42 2011 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.7.2 (ruby-1.9.2).
</div>

  </body>
</html>